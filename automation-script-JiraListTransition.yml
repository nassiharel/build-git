comment: This script lists all possible transitions for a given issue.
commonfields:
  id: script-JiraListTransition
  version: -1
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: 5.0.0
    itemVersion: 2.0.0
    packID: Jira
    packName: Atlassian Jira
    packPropagationLabels:
    - all
    propagationLabels: []
    toServerVersion: ""
dockerimage: demisto/python3:3.9.7.24076
enabled: true
engineinfo: {}
mainengineinfo: {}
name: script-JiraListTransition
pswd: ""
runas: DBotWeakRole
runonce: false
script: |
  register_module_line('script-JiraListTransition', 'start', __line__())




  def create_output(error_msg):
      return {
          "Type": entryTypes["error"],
          "ContentsFormat": formats["text"],
          "Contents": error_msg,
          "HumanReadable": error_msg,
          "ReadableContentsFormat": formats["text"],
      }


  def main():
      output = {}
      try:
          incident = demisto.incidents()[0]
          incident_id = demisto.incidents()[0].get("dbotMirrorId")
          if incident_id:
              res = demisto.executeCommand(
                  "jira-list-transitions", {"issueId": incident.get("dbotMirrorId")}
              )
              if res and isinstance(res, list):
                  transitions_names = res[0].get("Contents")
                  if transitions_names:
                      if not isError(res):
                          output = {"hidden": False, "options": sorted(transitions_names)}
                      else:
                          output = create_output(
                              f"Error occurred while running jira-list-transitions. The response is: {transitions_names}"
                          )
                  else:
                      output = create_output(
                          f'Error occurred while running script-JiraListTransition. Could not find:"Content" as key. '
                          f'The response is: {res} '
                      )
              else:
                  output = create_output(
                      f"Error occurred while running script-JiraListTransition. expected a list as response but got:"
                      f" {type(res)}. The response is: {res}"
                  )
          else:
              output = create_output(
                  'Error occurred while running script-JiraListTransition because could not get "dbotMirrorId" from '
                  'incident. '
              )
      except Exception as ex:
          output = create_output(
              "Error occurred while running script-JiraListTransition. got the next error:\n"
              + str(ex)
          )
      finally:
          demisto.results(output)


  if __name__ in ["__main__", "builtin", "builtins"]:
      main()

  register_module_line('script-JiraListTransition', 'end', __line__())
scripttarget: 0
subtype: python3
system: true
tags:
- field-display
type: python
